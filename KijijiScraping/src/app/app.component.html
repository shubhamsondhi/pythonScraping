<app-notification></app-notification>

<header>
    <div class="navbar navbar-dark bg-dark box-shadow">
        <div class="container d-flex justify-content-between">
            <a href="#" class="navbar-brand d-flex align-items-center">
                <i
                    style="margin-right: 0.3em"
                    class="fas fa-map-marked-alt"
                ></i>
                <strong>Kijiji scraper</strong>
            </a>
        </div>
    </div>
</header>
<mat-drawer-container class="example-container" autosize>
    <mat-drawer #drawer class="col-md-2 example-sidenav" opened mode="side">
      <h2>Tools to create URL</h2>
      <br>
        <div class="filterInputs">
            <mat-form-field appearance="outline">
              <mat-label>Page number</mat-label>
                <input
                    min="1"
                    (change)="createUrl($event)"
                    type="number"
                    matInput
                    placeholder="Page number"
                    #urlBox="ngModel"
                    [(ngModel)]="urlV2.pageNumber"
                    required
                    name="startbox"
                    aria-describedby="basic-addon3"
                />
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>City Name</mat-label>
                <mat-select
                    name="cityDdl"
                    #city
                    [(ngModel)]="this.urlV2?.urlcode.cityCode"
                    (selectionChange)="citySelected($event)"
                ><mat-option>--</mat-option>
                    <mat-option
                        *ngFor="let items of cityNames.names"
                        [value]="items.citycode"
                    >
                        {{ items.cityName }}</mat-option
                    >
                </mat-select>
            </mat-form-field>

            <mat-form-field appearance="outline" *ngIf="this.urlV2?.urlcode?.cityCode">
                <mat-label>Categories</mat-label>
                <mat-select
                    name="categoryDdl"
                    #category
                    [(ngModel)]="selectedcateGoryIdLevel1"
                    (selectionChange)="categoryChanged($event)"
                ><mat-option>--</mat-option>
                    <mat-option
                        *ngFor="let items of categories?.level1?.items"
                        [value]="items.categoryId"
                    >
                        {{ items.name }}</mat-option
                    >
                </mat-select>
            </mat-form-field>

            <mat-form-field
                appearance="outline"
                *ngIf="selectedcateGoryIdLevel1"
            >
                <mat-label>Sub Categories</mat-label>
                <mat-select
                    name="categorySubDdl"
                    [(ngModel)]="selectedcateGoryIdLevel2"
                    (selectionChange)="categoryChanged($event)"
                ><mat-option>--</mat-option>
                    <mat-option
                        *ngFor="let items of categories?.level2?.items"
                        [value]="items.categoryId"
                    >
                        {{ items.name }}</mat-option
                    >
                </mat-select>
            </mat-form-field>

            <mat-form-field
                appearance="outline"
                *ngIf="
                    categories?.level3?.items.length &&
                    !(categories?.level3?.items.length === 0)
                "
            >
                <mat-label>Level 3 Cagtegories</mat-label>
                <mat-select
                    name="categorySubDdl"
                    [(ngModel)]="selectedcateGoryIdLevel3"
                    (selectionChange)="categoryChanged($event)"
                >
                    <mat-option
                        *ngFor="let items of categories?.level3?.items"
                        [value]="items.categoryId"
                    >
                        {{ items.name }}</mat-option
                    >
                </mat-select>
            </mat-form-field>
        </div>
        <mat-divider></mat-divider>
        <div *ngIf="needPriceFilter">
            <mat-form-field class="price" appearance="outline">
                <input
                    matInput
                    (change)="createUrl($event)"
                    type="text"
                    [name]="minPrice"
                    [(ngModel)]="minPrice"
                    data-type="price"
                    data-placeholder="price from"
                    title="from"
                    class="placeholder-text"
                />
            </mat-form-field>
            -
            <mat-form-field class="price" appearance="outline">
                <input
                    (change)="createUrl($event)"
                    matInput
                    type="text"
                    [name]="maxPrice"
                    [(ngModel)]="maxPrice"
                    data-type="price"
                    data-placeholder="price to"
                    title="to"
                    class="placeholder-text"
                />
            </mat-form-field>
        </div>
    </mat-drawer>
    <div class="example-sidenav-content">
        <app-home  [urlV2]="urlV2" ></app-home>
        <button type="button" mat-button (click)="drawer.toggle()">
            Toggle sidenav
        </button>
    </div>
</mat-drawer-container>
